# BumplessPipeDreams.jl
*a julia package for bumpless pipe dreams*

[![Build Status](https://github.com/pseudoeffective/BumplessPipeDreams.jl/actions/workflows/CI.yml/badge.svg?branch=main)](https://github.com/pseudoeffective/BumplessPipeDreams.jl/actions/workflows/CI.yml?query=branch%3Amain)

This package provides functions for working with *bumpless pipe dreams* (BPDs).  These are combinatorial gadgets which enumerate terms in [Schubert](https://en.wikipedia.org/wiki/Schubert_polynomial) and [Grothendieck polynomials](https://www.symmetricfunctions.com/grothendieck.htm), developed by [Lam-Lee-Shimozono](https://arxiv.org/abs/1806.11233).  See also [Weigandt](https://arxiv.org/abs/2003.07342).

BPDs are in bijection with [alternating sign matrices](https://en.wikipedia.org/wiki/Alternating_sign_matrix), and the package includes some methods for passing between the two.

To use the package, first install Julia.  If you are new to this language, I recommend Ulrich Thiel's page on [JuLie](https://ulthiel.github.io/JuLie.jl/dev/), which in addition to providing software, has a nice introduction for the algebraically-minded mathematician.

To install the BPDs package do this:
```julia-repl
julia> using Pkg
julia> Pkg.add(BumplessPipeDreams)
```

To start using the package, type
```julia-repl
julia> using BumplessPipeDreams
```

The package generates BPDs associated to a permutation.  For example:
```julia-repl
julia> w = [5,2,1,4,3];

julia> b = Rothe(w)

 □ □ □ □ ╭─
 □ ╭─────┼─
 ╭─┼─────┼─
 │ │ □ ╭─┼─
 │ │ ╭─┼─┼─

julia> bpds = collect(all_bpds(w))
3-element Vector{BPD}:
                               
□ □ □ □ ╭─
□ ╭─────┼─
╭─┼─────┼─
│ │ □ ╭─┼─
│ │ ╭─┼─┼─

                
□ □ □ □ ╭─
□ ╭─────┼─
□ │ ╭───┼─
╭─┼─╯ ╭─┼─
│ │ ╭─┼─┼─

                
□ □ □ □ ╭─
□ □ ╭───┼─
╭───┼───┼─
│ ╭─╯ ╭─┼─
│ │ ╭─┼─┼─

```
There are also K-theory versions:
```julia-repl
julia> kbpds = collect(all_Kbpds(w))
4-element Vector{BPD}:
                                    
□ □ □ □ ╭─
□ ╭─────┼─
╭─┼─────┼─
│ │ □ ╭─┼─
│ │ ╭─┼─┼─

                
□ □ □ □ ╭─
□ ╭─────┼─
□ │ ╭───┼─
╭─┼─╯ ╭─┼─
│ │ ╭─┼─┼─

                
□ □ □ □ ╭─
□ □ ╭───┼─
□ ╭─┼───┼─
╭─┼─╯ ╭─┼─
│ │ ╭─┼─┼─

                
□ □ □ □ ╭─
□ □ ╭───┼─
╭───┼───┼─
│ ╭─╯ ╭─┼─
│ │ ╭─┼─┼─
```

One can check if a BPD is reduced or not:
```julia-repl
julia> isreduced(kbpds[2])
true

julia> isreduced(kbpds[3])
false
```

There are functions for extracting words (reduced or not) from a BPD:
```julia-repl
julia> bpd2word(kbpds[2])
6-element Vector{Int64}:
 1
 3
 4
 3
 2
 1

julia> bpd2word(kbpds[3])
7-element Vector{Int64}:
 1
 3
 4
 1
 3
 2
 1
```

The diagrams can be output in postscript, for use in LaTeX with PSTricks:
```julia-repl
julia> draw_bpd(bpds[2], saveto="./assets/bpd.tex", mode=:ps)
"%% Auto-generated by draw_bpd\n\\psset{unit=0.7cm,linewidth=0.8pt}\n\\begin{pspicture}(0,0)(5,5)\n\\psline[linecolor=lightgray] (0,1)(5,1)\n\\psline[linecolor=lightgray] (0,2)(5,2)\n\\psline[linecolor=lightgray] (0,3)(5,3)\n\\psline[linecolor=lightgray] (0,4)(5,4)\n\\psline[linecolor=lightgray] (1,0)(1,5)\n\\psline[linecolor=lightgray] (2,0)(2,5)\n\\psline[linecolor=lightgray] (3,0)(3,5)\n\\psline[linecolor=light" ⋯ 1866 bytes ⋯ " (4.00,1.50)(5.00,1.50)\n\\psline[linecolor=blue] (0.50,0.00)(0.50,1.00)\n\\psline[linecolor=blue] (1.50,0.00)(1.50,1.00)\n\\psbezier[linecolor=blue] (3.00,0.50) (2.50,0.50) (2.50,0.50) (2.50,0.00)\n\\psline[linecolor=blue] (3.50,0.00)(3.50,1.00)\n\\psline[linecolor=blue] (3.00,0.50)(4.00,0.50)\n\\psline[linecolor=blue] (4.50,0.00)(4.50,1.00)\n\\psline[linecolor=blue] (4.00,0.50)(5.00,0.50)\n\\end{pspicture}\n"
```

When the `Plots` package is installed, another method is available for producing diagrams in several formats (PNG, PDF, etc.), depending on what backend `Plots` is using.
```julia-repl
julia> draw_bpd(bpds[2], saveto="./assets/bpd.png", mode=:plots)
```
![bpd](https://github.com/pseudoeffective/BumplessPipeDreams.jl/blob/main/assets/bpd.png)

An interactive javascript app based on the functions in this package can be found [here](https://people.math.osu.edu/anderson.2804/bpd-viz/bpd-viz.html).